!function(t){var e={};function o(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e),o.d(e,"default",(function(){return a}));class n{constructor(){this.subs=[]}addSub(t){this.subs.push(t)}removeSub(t){remove(this.subs,t)}depend(){console.log("收集依赖"),window.target&&(console.log("depend",window.target),this.addSub(window.target))}notify(){console.log("notify","更新依赖");const t=this.subs.slice();console.log("---",t,"---");for(let e=0,o=t.length;e<o;e++)t[e].update()}remove(t,e){if(t.length){const o=t.indexOf(e);if(o>-1)return t.splice(o,1)}}}class s{constructor(t){this.value=t,Array.isArray(t)||this.walk(t)}walk(t){console.log("walk",t);const e=Object.keys(t);console.log(e);for(let o=0,n=e.length;o<n;o++)l(t,e[o],t[e[o]])}}function l(t,e,o){"object"==typeof o&&new s(o);let l=new n;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:()=>(console.log(e+"属性被读取了"),l.depend(),o),set(t){console.log(e+"属性被修改了"),o!==t&&(o=t,l.notify())}})}const i=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/,r=new RegExp(`[^${i.source}.$_\\d]`);class c{constructor(t,e,o){console.log(t,e,o),this.vm=t,this.getter=function(t){if(console.log(t),console.log(r.test(t)),r.test(t))return;const e=t.split(".");return console.log(e),console.log(i.source),function(t){console.log(t);for(let o=0;o<e.length;o++){if(console.log(o,e[o]),!t)return;t=t[e[o]]}return t}}(e),console.log(this.getter),this.cb=o,this.value=this.get()}get(){window.target=this,console.log(this.getter);let t=this.getter.call(this.vm,this.vm);return console.log(t),window.target=void 0,t}update(){console.log("update","更新依赖");const t=this.value;this.value=this.get(),this.cb.call(this.vm,this.value,t)}}class u{constructor(t,e){this.$el=document.querySelector(t),this.$vm=e,this.$el&&(console.log("el",this.$el),this.$fragment=this.getNodeChirdren(this.$el),this.compile(this.$fragment),this.$el.appendChild(this.$fragment))}getNodeChirdren(t){const e=document.createDocumentFragment();let o;for(;o=t.firstChild;)e.appendChild(o);return e}compile(t){const e=t.childNodes;Array.from(e).forEach(t=>{1==t.nodeType||2==t.nodeType||3==t.nodeType&&this.compileText(t),t.childNodes&&t.childNodes.length>0&&this.compile(t)})}compileText(t){console.log("compileText");const e=/\{\{(.+?)\}\}/;var o=t.textContent;if(e.test(o)){const n=RegExp.$1.trim();t.textContent=o.replace(e,this.$vm.$data[n]),console.log(this.$vm.$data),console.log(n),console.log(this.$vm.$data[n]),new c(this.$vm.$data,n,e=>{console.log("通过回调函数，更新视图",e),t.textContent=e})}}}class a{constructor(t){this.$data=t.data,this.$el=t.el,this.$options=t,this.init()}init(){const t=this;this.$data&&(console.log("处理data"),this.initData(t)),this.$el&&(console.log("处理el"),new u(this.$el,t))}initData(t){new s(t.$data)}}window.MiniVue=a}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvb2JzZXJ2ZXIvZGVwLmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL29ic2VydmVyL29iLmpzIiwid2VicGFjazovLy8uL3V0aWwvbGFuZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9vYnNlcnZlci93YXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcGlsZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvaW5zdGFuY2UvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJEZXAiLCJ0aGlzIiwic3VicyIsInN1YiIsInB1c2giLCJyZW1vdmUiLCJjb25zb2xlIiwibG9nIiwid2luZG93IiwidGFyZ2V0IiwiYWRkU3ViIiwic2xpY2UiLCJsZW4iLCJsZW5ndGgiLCJ1cGRhdGUiLCJhcnIiLCJpdGVtIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiT2JzZXJ2ZXIiLCJBcnJheSIsImlzQXJyYXkiLCJ3YWxrIiwib2JqIiwia2V5cyIsImRlZmluZVJlYWN0aXZlIiwiZGF0YSIsInZhbCIsImRlcCIsImNvbmZpZ3VyYWJsZSIsImRlcGVuZCIsIm5ld1ZhbCIsIm5vdGlmeSIsInVuaWNvZGVSZWdFeHAiLCJiYWlsUkUiLCJSZWdFeHAiLCJzb3VyY2UiLCJ2bSIsImV4cE9yRm4iLCJjYiIsInBhdGgiLCJ0ZXN0Iiwic2VnbWVudHMiLCJzcGxpdCIsInBhcnNlUGF0aCIsInVuZGVmaW5lZCIsIm9sZFZhbHVlIiwiZWwiLCIkZWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCIkdm0iLCIkZnJhZ21lbnQiLCJnZXROb2RlQ2hpcmRyZW4iLCJjb21waWxlIiwiYXBwZW5kQ2hpbGQiLCJmcmFnIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNoaWxkIiwiZmlyc3RDaGlsZCIsImNoaWxkTm9kZXMiLCJmcm9tIiwiZm9yRWFjaCIsIm5vZGUiLCJub2RlVHlwZSIsImNvbXBpbGVUZXh0IiwicmVnIiwicGFyYW0iLCJ0ZXh0Q29udGVudCIsIiQxIiwidHJpbSIsInJlcGxhY2UiLCIkZGF0YSIsIm5ld1ZhbHVlIiwib3B0aW9ucyIsIiRvcHRpb25zIiwiaW5pdCIsImluaXREYXRhIiwiTWluaVZ1ZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlC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LGNBQWVtRSxHQUMzQlYsRUFBS0ssWUFBY0ssTUN4RFosTUFBTSxFQUNuQixZQUFZQyxHQUNWMUUsS0FBS3dFLE1BQVFFLEVBQVFoRCxLQUNyQjFCLEtBQUtnRCxJQUFNMEIsRUFBUTNCLEdBQ25CL0MsS0FBSzJFLFNBQVdELEVBQ2hCMUUsS0FBSzRFLE9BRVAsT0FDRSxNQUFNdkMsRUFBS3JDLEtBQ1BBLEtBQUt3RSxRQUNQbkUsUUFBUUMsSUFBSSxVQUNaTixLQUFLNkUsU0FBU3hDLElBRWJyQyxLQUFLZ0QsTUFDTjNDLFFBQVFDLElBQUksUUFDWixJQUFJLEVBQVFOLEtBQUtnRCxJQUFLWCxJQUcxQixTQUFTQSxHQUNJLElBQUlsQixFQUFTa0IsRUFBR21DLFFBTy9CakUsT0FBT3VFLFFBQVUiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEZXAge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5zdWJzID0gW11cclxuICB9XHJcbiAgYWRkU3ViKHN1Yikge1xyXG4gICAgdGhpcy5zdWJzLnB1c2goc3ViKVxyXG4gIH1cclxuICAvLyDliKDpmaTkvp3otZZcclxuICByZW1vdmVTdWIoc3ViKSB7XHJcbiAgICByZW1vdmUodGhpcy5zdWJzLCBzdWIpXHJcbiAgfVxyXG4gIC8vIOa3u+WKoOS4gOS4quS+nei1llxyXG4gIGRlcGVuZCgpIHtcclxuICAgIGNvbnNvbGUubG9nKCfmlLbpm4bkvp3otZYnKTtcclxuICAgIGlmKHdpbmRvdy50YXJnZXQpIHtcclxuICAgICAgY29uc29sZS5sb2coJ2RlcGVuZCcsd2luZG93LnRhcmdldCk7XHJcbiAgICAgIHRoaXMuYWRkU3ViKHdpbmRvdy50YXJnZXQpXHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIOmAmuefpeabtOaWsOaJgOacieS+nei1llxyXG4gIG5vdGlmeSgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdub3RpZnknLCfmm7TmlrDkvp3otZYnKTtcclxuICAgIGNvbnN0IHN1YnMgPSB0aGlzLnN1YnMuc2xpY2UoKVxyXG4gICAgY29uc29sZS5sb2coJy0tLScsc3VicywnLS0tJyk7XHJcbiAgICBmb3IobGV0IGkgPSAwLGxlbj0gc3Vicy5sZW5ndGg7aTxsZW47aSsrKSB7XHJcbiAgICAgIHN1YnNbaV0udXBkYXRlKClcclxuICAgIH1cclxuICB9XHJcbiAgLy8g5Yig6ZmkXHJcbiAgcmVtb3ZlKGFyciwgaXRlbSkge1xyXG4gICAgaWYgKGFyci5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgaW5kZXggPSBhcnIuaW5kZXhPZihpdGVtKVxyXG4gICAgICBpZihpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIGFyci5zcGxpY2UoaW5kZXgsMSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgRGVwIGZyb20gJy4vZGVwJ1xyXG5cclxuZXhwb3J0IGNsYXNzIE9ic2VydmVyIHtcclxuICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xyXG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlXHJcbiAgICBpZighQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgdGhpcy53YWxrKHZhbHVlKVxyXG4gICAgfWVsc2Uge1xyXG4gICAgICAvLyB2YWzkuLrmlbDnu4Tml7bnmoTpgLvovpFcclxuICAgIH1cclxuICB9XHJcbiAgd2FsayhvYmopIHtcclxuICAgIGNvbnNvbGUubG9nKCd3YWxrJyxvYmopO1xyXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iailcclxuICAgIGNvbnNvbGUubG9nKGtleXMpO1xyXG4gICAgZm9yKGxldCBpID0gMCxsZW4gPSBrZXlzLmxlbmd0aDtpPGxlbjtpKyspIHtcclxuICAgICAgLy8g5bCG5b2T5YmN55qE5a+56LGhIOW9k+WJjeeahGtleSDku6Xlj4ogdmFsdWUg5Lyg5YWlXHJcbiAgICAgIGRlZmluZVJlYWN0aXZlKG9iaixrZXlzW2ldLG9ialtrZXlzW2ldXSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZShkYXRhLGtleSx2YWwpIHtcclxuICAvLyDpgJLlvZIg5aaC5p6cIHZhbHVl5piv5a+56LGh55qE6K+dXHJcbiAgaWYodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcclxuICAgIG5ldyBPYnNlcnZlcih2YWwpXHJcbiAgfVxyXG4gIC8vIOWIm+W7uuS4gOS4qmRlcOWunuS+i1xyXG4gIGxldCBkZXAgPSBuZXcgRGVwKClcclxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGF0YSwga2V5LCB7XHJcbiAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgLy8g5ZyoZ2V0dGVy5pe25YCZ5pS26ZuG5L6d6LWWXHJcbiAgICBnZXQoKSB7XHJcbiAgICAgIC8vIGRlcC5wdXNoKHdpbmRvdy50YXJnZXQpXHJcbiAgICAgIGNvbnNvbGUubG9nKGAke2tleX3lsZ7mgKfooqvor7vlj5bkuoZgKVxyXG4gICAgICAvLyDlnKjor7vlj5bml7blgJnmlLbpm4bkvp3otZZcclxuICAgICAgZGVwLmRlcGVuZCgpXHJcbiAgICAgIHJldHVybiB2YWxcclxuICAgIH0sXHJcbiAgICAvLyDlnKhzZXR0ZXLml7blgJnop6blj5Hkvp3otZZcclxuICAgIHNldChuZXdWYWwpIHtcclxuICAgICAgY29uc29sZS5sb2coYCR7a2V5feWxnuaAp+iiq+S/ruaUueS6hmApXHJcbiAgICAgIGlmICh2YWwgPT09IG5ld1ZhbCkge3JldHVybn1cclxuICAgICAgLy8gZm9yKGxldCBpID0gMCwgbGVuID0gZGVwLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIC8vICAgZGVwW2ldKG5ld1ZhbCx2YWwpXHJcbiAgICAgIC8vIH1cclxuICAgICAgdmFsID0gbmV3VmFsXHJcbiAgICAgIC8vIOS/ruaUueaXtuWAmSDop6blj5Hkvp3otZYg5pu05pawXHJcbiAgICAgIGRlcC5ub3RpZnkoKVxyXG4gICAgfSxcclxuICB9KVxyXG59IiwiLyoqXHJcbiAqIFBhcnNlIHNpbXBsZSBwYXRoLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHVuaWNvZGVSZWdFeHAgPSAvYS16QS1aXFx1MDBCN1xcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwM0YtXFx1MjA0MFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRC9cclxuLyoqXHJcbiAqIFBhcnNlIHNpbXBsZSBwYXRoLlxyXG4gKiDmiorkuIDkuKrlvaLlpoInZGF0YS5hLmIuYyfnmoTlrZfnrKbkuLLot6/lvoTmiYDooajnpLrnmoTlgLzvvIzku47nnJ/lrp7nmoRkYXRh5a+56LGh5Lit5Y+W5Ye65p2lXHJcbiAqIOS+i+Wmgu+8mlxyXG4gKiBkYXRhID0ge2E6e2I6e2M6Mn19fVxyXG4gKiBwYXJzZVBhdGgoJ2EuYi5jJykoZGF0YSkgIC8vIDJcclxuICovXHJcbmNvbnN0IGJhaWxSRSA9IG5ldyBSZWdFeHAoYFteJHt1bmljb2RlUmVnRXhwLnNvdXJjZX0uJF9cXFxcZF1gKVxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQYXRoIChwYXRoKXtcclxuICBjb25zb2xlLmxvZyhwYXRoKTtcclxuICBjb25zb2xlLmxvZyhiYWlsUkUudGVzdChwYXRoKSlcclxuICBpZiAoYmFpbFJFLnRlc3QocGF0aCkpIHtcclxuICAgIHJldHVyblxyXG4gIH1cclxuICBjb25zdCBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy4nKVxyXG4gIGNvbnNvbGUubG9nKHNlZ21lbnRzKVxyXG4gIGNvbnNvbGUubG9nKHVuaWNvZGVSZWdFeHAuc291cmNlKVxyXG4gIHJldHVybiBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICBjb25zb2xlLmxvZyhvYmopO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zb2xlLmxvZyhpLHNlZ21lbnRzW2ldKTtcclxuICAgICAgaWYgKCFvYmopIHJldHVyblxyXG4gICAgICBvYmogPSBvYmpbc2VnbWVudHNbaV1dXHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2JqXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7cGFyc2VQYXRofSBmcm9tICcuLi8uLi8uLi91dGlsL2xhbmcnXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdhdGNoZXIge1xyXG4gIGNvbnN0cnVjdG9yKHZtLGV4cE9yRm4sY2IpIHtcclxuICAgIGNvbnNvbGUubG9nKHZtLCBleHBPckZuLCBjYilcclxuICAgIHRoaXMudm0gPSB2bTtcclxuICAgIC8vIOaJp+ihjHRoaXMuZ2V0dGVyKCkg5bCx5Y+v5Lul6K+75Y+WZGF0YS5hLmIuY+eahOWGheWuuVxyXG4gICAgdGhpcy5nZXR0ZXIgPSBwYXJzZVBhdGgoZXhwT3JGbik7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLmdldHRlcilcclxuICAgIHRoaXMuY2IgPSBjYjtcclxuICAgIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xyXG4gIH1cclxuICBnZXQoKSB7XHJcbiAgICAvLyDmiorlrp7kvovoh6rouqvotYvnu5nkuoblhajlsYDnmoTkuIDkuKrllK/kuIDlr7nosaF3aW5kb3cudGFyZ2V05LiKXHJcbiAgICB3aW5kb3cudGFyZ2V0ID0gdGhpc1xyXG4gICAgLy8g6I635Y+W5LiA5LiL6KKr5L6d6LWW55qE5pWw5o2u77yM6I635Y+W6KKr5L6d6LWW5pWw5o2u55qE55uu55qE5piv6Kem5Y+R6K+l5pWw5o2u5LiK6Z2i55qEZ2V0dGVyXHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLmdldHRlcik7XHJcbiAgICBsZXQgdmFsdWUgPSB0aGlzLmdldHRlci5jYWxsKHRoaXMudm0sIHRoaXMudm0pXHJcbiAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XHJcbiAgICB3aW5kb3cudGFyZ2V0ID0gdW5kZWZpbmVkXHJcbiAgICByZXR1cm4gdmFsdWVcclxuICB9XHJcbiAgdXBkYXRlKCkge1xyXG4gICAgY29uc29sZS5sb2coJ3VwZGF0ZScsJ+abtOaWsOS+nei1licpO1xyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLnZhbHVlXHJcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5nZXQoKVxyXG4gICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sdGhpcy52YWx1ZSxvbGRWYWx1ZSlcclxuICB9XHJcbn0iLCJpbXBvcnQgV2F0Y2hlciBmcm9tICcuLi9jb3JlL29ic2VydmVyL3dhdGNoJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcGlsZSB7XHJcbiAgY29uc3RydWN0b3IoZWwsIHZtKSB7XHJcbiAgICB0aGlzLiRlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpXHJcbiAgICB0aGlzLiR2bSA9IHZtXHJcbiAgICBpZiAodGhpcy4kZWwpIHtcclxuICAgICAgY29uc29sZS5sb2coJ2VsJyx0aGlzLiRlbCk7XHJcbiAgICAgIHRoaXMuJGZyYWdtZW50ID0gdGhpcy5nZXROb2RlQ2hpcmRyZW4odGhpcy4kZWwpXHJcbiAgICAgIHRoaXMuY29tcGlsZSh0aGlzLiRmcmFnbWVudClcclxuICAgICAgdGhpcy4kZWwuYXBwZW5kQ2hpbGQodGhpcy4kZnJhZ21lbnQpXHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldE5vZGVDaGlyZHJlbihlbCkge1xyXG4gICAgY29uc3QgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKVxyXG4gICAgbGV0IGNoaWxkXHJcbiAgICB3aGlsZSAoKGNoaWxkID0gZWwuZmlyc3RDaGlsZCkpIHtcclxuICAgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZClcclxuICAgIH1cclxuICAgIHJldHVybiBmcmFnXHJcbiAgfVxyXG4gIGNvbXBpbGUoZWwpIHtcclxuICAgIGNvbnN0IGNoaWxkTm9kZXMgPSBlbC5jaGlsZE5vZGVzXHJcbiAgICBBcnJheS5mcm9tKGNoaWxkTm9kZXMpLmZvckVhY2goKG5vZGUpID0+IHtcclxuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkge1xyXG4gICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMikge1xyXG4gICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykge1xyXG4gICAgICAgIC8vM+S4uuaWh+acrOiKgueCuVxyXG4gICAgICAgIHRoaXMuY29tcGlsZVRleHQobm9kZSlcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6YCS5b2S5a2Q6IqC54K5XHJcbiAgICAgIGlmIChub2RlLmNoaWxkTm9kZXMgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmNvbXBpbGUobm9kZSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNvbXBpbGVUZXh0KG5vZGUpIHtcclxuICAgIGNvbnNvbGUubG9nKCdjb21waWxlVGV4dCcpXHJcbiAgICAvKipcclxuICAgICAqIC4g6KGo56S65Lu75oSP5Y2V5Liq5a2X56ym77yM5LiN5YyF5ZCr5o2i6KGM56ymXHJcbiAgICAgKiArIOihqOekuuWMuemFjeWJjemdouWkmuS4quebuOWQjOeahOWtl+esplxyXG4gICAgICog77yf6KGo56S66Z2e6LSq5amq5qih5byP77yM5bC95Y+v6IO95pep55qE57uT5p2f5p+l5om+XHJcbiAgICAgKiAqL1xyXG4gICAgY29uc3QgcmVnID0gL1xce1xceyguKz8pXFx9XFx9L1xyXG4gICAgdmFyIHBhcmFtID0gbm9kZS50ZXh0Q29udGVudFxyXG4gICAgaWYgKHJlZy50ZXN0KHBhcmFtKSkge1xyXG4gICAgICAvLyAgJDHooajnpLrljLnphY3nmoTnrKzkuIDkuKpcclxuICAgICAgY29uc3Qga2V5ID0gUmVnRXhwLiQxLnRyaW0oKVxyXG4gICAgICBub2RlLnRleHRDb250ZW50ID0gcGFyYW0ucmVwbGFjZShyZWcsIHRoaXMuJHZtLiRkYXRhW2tleV0pXHJcbiAgICAgIC8vIOe8luivkeaooeadv+eahOaXtuWAme+8jOWIm+W7uuS4gOS4qndhdGNoZXLlrp7kvovvvIzlubblnKjlhoXpg6jmjILovb3liLBEZXDkuIpcclxuICAgICAgY29uc29sZS5sb2codGhpcy4kdm0uJGRhdGEpXHJcbiAgICAgIGNvbnNvbGUubG9nKGtleSlcclxuICAgICAgY29uc29sZS5sb2codGhpcy4kdm0uJGRhdGFba2V5XSlcclxuICAgICAgbmV3IFdhdGNoZXIodGhpcy4kdm0uJGRhdGEsIGtleSwgKG5ld1ZhbHVlKSA9PiB7XHJcbiAgICAgICAgLy8g6YCa6L+H5Zue6LCD5Ye95pWw77yM5pu05paw6KeG5Zu+XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+mAmui/h+Wbnuiwg+WHveaVsO+8jOabtOaWsOinhuWbvicsIG5ld1ZhbHVlKVxyXG4gICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBuZXdWYWx1ZVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBPYnNlcnZlciB9IGZyb20gJy4uL29ic2VydmVyL29iLmpzJ1xyXG5pbXBvcnQgQ29tcGlsZSBmcm9tICcuLi8uLi9jb21waWxlci9pbmRleC5qcydcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWluaVZ1ZSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy4kZGF0YSA9IG9wdGlvbnMuZGF0YVxyXG4gICAgdGhpcy4kZWwgPSBvcHRpb25zLmVsXHJcbiAgICB0aGlzLiRvcHRpb25zID0gb3B0aW9uc1xyXG4gICAgdGhpcy5pbml0KClcclxuICB9XHJcbiAgaW5pdCgpIHtcclxuICAgIGNvbnN0IHZtID0gdGhpc1xyXG4gICAgaWYgKHRoaXMuJGRhdGEpIHtcclxuICAgICAgY29uc29sZS5sb2coJ+WkhOeQhmRhdGEnKTtcclxuICAgICAgdGhpcy5pbml0RGF0YSh2bSlcclxuICAgIH1cclxuICAgIGlmKHRoaXMuJGVsKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCflpITnkIZlbCcpXHJcbiAgICAgIG5ldyBDb21waWxlKHRoaXMuJGVsLCB2bSlcclxuICAgIH1cclxuICB9XHJcbiAgaW5pdERhdGEodm0pIHtcclxuICAgIGxldCBkYXRhID0gbmV3IE9ic2VydmVyKHZtLiRkYXRhKVxyXG4gIH1cclxuXHJcbn1cclxuXHJcblxyXG5cclxud2luZG93Lk1pbmlWdWUgPSBNaW5pVnVlIl0sInNvdXJjZVJvb3QiOiIifQ==